!function e(a,t,n){function r(s,l){if(!t[s]){if(!a[s]){var o="function"==typeof require&&require;if(!l&&o)return o(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=t[s]={exports:{}};a[s][0].call(u.exports,function(e){var t=a[s][1][e];return r(t?t:e)},u,u.exports,e,a,t,n)}return t[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(e,a,t){"use strict";var n=e("./datatable.helper");t.EVENT_REFRESH_DATA_TABLE_PREFIX="datatable-refresh-",t.EVENT_PAGE_CHANGED_DATA_TABLE="datatable-page-changed";var r=function(){function e(e,a){return this.$injector=e,this.usSpinnerService=a,this.create()}return e.prototype.linkFn=function(e,a){var t=a.find(".grid-datatable table thead th[data-sort]");new n.DataTableSortingHelper(t,this.service,e.dataTable.pageChanged).initSorting()},e.prototype.controller=function(e){var a=this;this.$scope=e;var n=e.dataTable;n.isSearchAllowed=!!n.isSearchAllowed,n.searchValue="",this.service=this.$injector.get(n.serviceName+"PresentationService"),n.uniqueKey=n.uniqueKey||Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,6),n.currentPage=1,n.itemsPerPage=this.service.getLimit(),n.pageChanged=function(e){a.markAsLoading(n),a.changePage(n,e||1)},n.pageChanged(),e.$watch("dataTable.searchValue",function(){n.pageChanged(n.currentPage)}),e.$on(t.EVENT_REFRESH_DATA_TABLE_PREFIX+n.uniqueKey,function(e,t){var r=t&&0<t.page?t.page:n.currentPage;a.markAsLoading(n),a.changePage(n,r)})},e.prototype.markAsLoading=function(e,a){void 0===a&&(a=!0),e.isLoading=a,a?this.usSpinnerService.spin(e.uniqueKey):this.usSpinnerService.stop(e.uniqueKey)},e.prototype.changePage=function(e,a){var n=this,r={};angular.extend(r,e.additionalQueryParameters),this.service.getAll(this.service.getSorting(),this.service.getLimit(),(a-1)*this.service.getLimit(),this.hasSearch(e)?e.searchValue:"",r).then(function(a){e.data=a,e.totalItems=a.recordsTotal})["finally"](function(){n.markAsLoading(e,!1),n.$scope.$emit(t.EVENT_PAGE_CHANGED_DATA_TABLE)})},e.prototype.hasSearch=function(e){return e.isSearchAllowed&&this.hasSearchMinValue(e.searchValue)},e.prototype.hasSearchMinValue=function(e){return!!e&&e.length>2},e.prototype.create=function(){var e=this,a={bindToController:!0,controller:["$scope",function(a){return e.controller(a)}],controllerAs:"dataTable",link:function(a,t){return e.linkFn(a,t)},restrict:"E",scope:{additionalQueryParameters:"=queryParameters",data:"=data",isSearchAllowed:"=search",serviceName:"@service",uniqueKey:"@uniqueKey"},templateUrl:"datatable.directive.html",transclude:!0};return a},e}();angular.module("angular-grid-datatable").directive("angularGridDatatable",["$injector","usSpinnerService",function(e,a){return new r(e,a)}])},{"./datatable.helper":2}],2:[function(e,a,t){"use strict";var n="asc",r="desc",i="sortable",s="sortable-"+n,l="sortable-"+r,o=function(){function e(e,a,t){this.sortableColumns=e,this.service=a,this.pageChangeCallback=t}return e.prototype.initSorting=function(){var e=this;0!==this.sortableColumns.length&&this.sortableColumns.each(function(a,t){var r=angular.element(t);r.addClass(i).on("click",function(a){a.preventDefault(),e.updateClasses(angular.element(a.target)),e.pageChangeCallback()}),e.service.getSorting().forEach(function(e){e.column===r.data("sort")&&r.addClass(e.direction===n?s:l)})})},e.prototype.updateClasses=function(e){var a=this,t=e.data("sort");e.parent().find("th").filter(function(a,t){return t!==e.get(0)}).each(function(e,t){a.service.removeSorting(angular.element(t).data("sort")),angular.element(t).removeClass(s),angular.element(t).removeClass(l)}),e.hasClass(s)?(this.service.addSorting(t,r),e.removeClass(s),e.addClass(l)):e.hasClass(l)?(this.service.removeSorting(t),e.removeClass(l)):(this.service.addSorting(t,n),e.addClass(s))},e}();t.DataTableSortingHelper=o},{}],3:[function(){"use strict";angular.module("angular-grid-datatable",["angularSpinner","bw.paging"])},{}],4:[function(e,a){var a;try{a=angular.module("angular-grid-datatable")}catch(t){a=angular.module("angular-grid-datatable",[])}a.run(["$templateCache",function(e){e.put("datatable.directive.html",'<div ng-show="dataTable.isLoading" class="transparent-cover"></div>\n\n<span us-spinner data-spinner-key="{{dataTable.uniqueKey}}"></span>\n\n<div class="grid-datatable grid-datatable__search" data-ng-show="true === dataTable.isSearchAllowed">\n    <label>\n        Search: <input class="grid-datatable__search__box" ng-model="dataTable.searchValue" type="text">\n    </label>\n</div>\n<div class="grid-datatable" ng-transclude></div>\n\n<paging class="pull-right"\n        data-page="dataTable.currentPage"\n        data-paging-action="dataTable.pageChanged(page)"\n        data-page-size="dataTable.itemsPerPage"\n        data-total="dataTable.totalItems"\n        data-adjacent="1"\n        data-show-prev-next="true"\n        data-text-prev="Previous"\n        data-text-next="Next"\n        data-show-boundary-links="false"></paging>\n\n<div class="clearfix"></div>\n\n')}])},{}]},{},[3,2,1,4]);