!function e(a,t,n){function r(s,o){if(!t[s]){if(!a[s]){var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=t[s]={exports:{}};a[s][0].call(u.exports,function(e){var t=a[s][1][e];return r(t?t:e)},u,u.exports,e,a,t,n)}return t[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(e,a,t){"use strict";var n=e("./datatable.helper");t.EVENT_REFRESH_DATA_TABLE_PREFIX="datatable-refresh-",t.EVENT_PAGE_CHANGED_DATA_TABLE="datatable-page-changed";var r=function(){function e(e,a){return this.$injector=e,this.usSpinnerService=a,this.create()}return e.prototype.linkFn=function(e,a){var t=a.find(".scx-data-table table thead th[data-sort]");new n.DataTableSortingHelper(t,this.service,e.scxDataTable.pageChanged).initSorting()},e.prototype.controller=function(e){var a=this;this.$scope=e;var n=e.scxDataTable;this.service=this.$injector.get(n.serviceName+"PresentationService"),n.uniqueKey=n.uniqueKey||Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,6),n.currentPage=1,n.itemsPerPage=this.service.getLimit(),n.pageChanged=function(e){a.markAsLoading(n),a.changePage(n,e)},n.pageChanged(),e.$on(t.EVENT_REFRESH_DATA_TABLE_PREFIX+n.uniqueKey,function(e,t){var r=t&&0<t.page?t.page:n.currentPage;a.markAsLoading(n),a.changePage(n,r)})},e.prototype.markAsLoading=function(e,a){void 0===a&&(a=!0),e.isLoading=a,a?this.usSpinnerService.spin(e.uniqueKey):this.usSpinnerService.stop(e.uniqueKey)},e.prototype.changePage=function(e,a){var n=this,r={};angular.extend(r,e.additionalQueryParameters),this.service.getAll(this.service.getSorting(),this.service.getLimit(),(a-1)*this.service.getLimit(),r).then(function(a){e.data=a,e.totalItems=a.recordsTotal})["finally"](function(){n.markAsLoading(e,!1),n.$scope.$emit(t.EVENT_PAGE_CHANGED_DATA_TABLE)})},e.prototype.create=function(){var e=this,a={bindToController:!0,controller:["$scope",function(a){return e.controller(a)}],controllerAs:"scxDataTable",link:function(a,t){return e.linkFn(a,t)},restrict:"E",scope:{additionalQueryParameters:"=queryParameters",data:"=data",serviceName:"@service",uniqueKey:"@uniqueKey"},templateUrl:"datatable.directive.html",transclude:!0};return a},e}();angular.module("angular-grid-datatable").directive("angularGridDatatable",["$injector","usSpinnerService",function(e,a){return new r(e,a)}])},{"./datatable.helper":2}],2:[function(e,a,t){"use strict";t.ASCENDING="asc",t.DESCENDING="desc";var n="sortable",r="sortable-"+t.ASCENDING,i="sortable-"+t.DESCENDING,s=function(){function e(e,a,t){this.sortableColumns=e,this.service=a,this.pageChangedCallback=t}return e.prototype.initSorting=function(){var e=this;0!==this.sortableColumns.length&&this.sortableColumns.each(function(a,s){var o=angular.element(s);o.addClass(n).on("click",function(a){a.preventDefault(),e.updateClasses(angular.element(a.target)),e.pageChangedCallback()}),e.service.getSorting().forEach(function(e){e.column===o.data("sort")&&o.addClass(e.direction===t.ASCENDING?r:i)})})},e.prototype.updateClasses=function(e){var a=this,n=e.data("sort");e.parent().find("th").filter(function(a,t){return t!==e.get(0)}).each(function(e,t){a.service.removeSorting(angular.element(t).data("sort")),angular.element(t).removeClass(r),angular.element(t).removeClass(i)}),e.hasClass(r)?(this.service.addSorting(n,t.DESCENDING),e.removeClass(r),e.addClass(i)):e.hasClass(i)?(this.service.removeSorting(n),e.removeClass(i)):(this.service.addSorting(n,t.ASCENDING),e.addClass(r))},e}();t.DataTableSortingHelper=s},{}],3:[function(){"use strict"},{}],4:[function(){"use strict";angular.module("angular-grid-datatable",["angularSpinner","bw.paging"])},{}],5:[function(e,a){var a;try{a=angular.module("angular-grid-datatable")}catch(t){a=angular.module("angular-grid-datatable",[])}a.run(["$templateCache",function(e){e.put("datatable.directive.html",'<div ng-show="scxDataTable.isLoading" class="transparent-cover"></div>\n\n<span us-spinner data-spinner-key="{{scxDataTable.uniqueKey}}"></span>\n\n<div class="scx-data-table" ng-transclude></div>\n\n<paging class="pull-right"\n        data-page="scxDataTable.currentPage"\n        data-paging-action="scxDataTable.pageChanged(page)"\n        data-page-size="scxDataTable.itemsPerPage"\n        data-total="scxDataTable.totalItems"\n        data-adjacent="1"\n        data-show-prev-next="true"\n        data-text-prev="Previous"\n        data-text-next="Next"\n        data-show-boundary-links="false"></paging>\n\n<div class="clearfix"></div>\n\n')}])},{}]},{},[4,3,2,1,5]);